<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>XACC: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XACC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="https://raw.githubusercontent.com/nlohmann/json/master/doc/json.gif"  alt="JSON for Modern C++"/>
</div>
<p><a href="https://travis-ci.org/nlohmann/json"></a> <a href="https://ci.appveyor.com/project/nlohmann/json"></a> <a href="https://coveralls.io/r/nlohmann/json"></a> <a href="http://melpon.org/wandbox/permlink/wuiuqYiYqRTdI3rG"></a> <a href="http://nlohmann.github.io/json"></a> <a href="https://raw.githubusercontent.com/nlohmann/json/master/LICENSE.MIT"></a> <a href="https://github.com/nlohmann/json/releases"></a> <a href="http://github.com/nlohmann/json/issues"></a></p>
<h2>Design goals</h2>
<p>There are myriads of <a href="http://json.org">JSON</a> libraries out there, and each may even have its reason to exist. Our class had these design goals:</p>
<ul>
<li><b>Intuitive syntax</b>. In languages such as Python, JSON feels like a first class data type. We used all the operator magic of modern C++ to achieve the same feeling in your code. Check out the <a href="#examples">examples below</a> and you know, what I mean.</li>
<li><b>Trivial integration</b>. Our whole code consists of a single header file <code><a class="el" href="a00257_source.html">json.hpp</a></code>. That's it. No library, no subproject, no dependencies, no complex build system. The class is written in vanilla C++11. All in all, everything should require no adjustment of your compiler flags or project settings.</li>
<li><b>Serious testing</b>. Our class is heavily <a href="https://github.com/nlohmann/json/blob/master/test/json_unit.cc">unit-tested</a> and covers <a href="https://coveralls.io/r/nlohmann/json">100%</a> of the code, including all exceptional behavior. Furthermore, we checked with <a href="http://valgrind.org">Valgrind</a> that there are no memory leaks.</li>
</ul>
<p>Other aspects were not so important to us:</p>
<ul>
<li><b>Memory efficiency</b>. Each JSON object has an overhead of one pointer (the maximal size of a union) and one enumeration element (1 byte). The default generalization uses the following C++ data types: <code>std::string</code> for strings, <code>int64_t</code>, <code>uint64_t</code> or <code>double</code> for numbers, <code>std::map</code> for objects, <code>std::vector</code> for arrays, and <code>bool</code> for Booleans. However, you can template the generalized class <code>basic_json</code> to your needs.</li>
<li><b>Speed</b>. We currently implement the parser as naive <a href="http://en.wikipedia.org/wiki/Recursive_descent_parser">recursive descent parser</a> with hand coded string handling. It is fast enough, but a <a href="http://en.wikipedia.org/wiki/LALR_parser">LALR-parser</a> with a decent regular expression processor should be even faster (but would consist of more files which makes the integration harder).</li>
</ul>
<p>See the <a href="https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont">contribution guidelines</a> for more information.</p>
<h2>Integration</h2>
<p>The single required source, file <code><a class="el" href="a00257_source.html">json.hpp</a></code> is in the <code>src</code> directory or <a href="https://github.com/nlohmann/json/releases">released here</a>. All you need to do is add</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;json.hpp&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// for convenience</span></div><div class="line"><span class="keyword">using</span> <a class="code" href="a00025.html">json</a> = <a class="code" href="a00434.html#a2bfd99e845a2e5cd90aeaf1b1431f474">nlohmann::json</a>;</div></div><!-- fragment --><p>to the files you want to use JSON objects. That's it. Do not forget to set the necessary switches to enable C++11 (e.g., <code>-std=c++11</code> for GCC and Clang).</p>
<h2>Supported compilers</h2>
<p>Though it's 2016 already, the support for C++11 is still a bit sparse. Currently, the following compilers are known to work:</p>
<ul>
<li>GCC 4.9 - 6.0 (and possibly later)</li>
<li>Clang 3.4 - 3.9 (and possibly later)</li>
<li>Microsoft Visual C++ 14.0 RC (and possibly later)</li>
</ul>
<p>I would be happy to learn about other compilers/versions.</p>
<p>Please note:</p>
<ul>
<li>GCC 4.8 does not work because of two bugs (<a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=55817">55817</a> and <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824">57824</a>) in the C++11 support.</li>
<li>For GCC running on MinGW or Android SDK, the error `'to_string' is not a member of 'std'<code>(or similarly, for</code>strtod`) may occur. Note this is not an issue with the code, but rather with the compiler itself. Please refer to <a href="http://tehsausage.com/mingw-to-string">this site</a> and <a href="https://github.com/nlohmann/json/issues/136">this discussion</a> for information on how to fix this bug.</li>
</ul>
<h2>Examples</h2>
<p>Here are some examples to give you an idea how to use the class.</p>
<p>Assume you want to create the JSON object</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  &quot;pi&quot;: 3.141,</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  &quot;happy&quot;: true,</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  &quot;name&quot;: &quot;Niels&quot;,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  &quot;nothing&quot;: null,</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  &quot;answer&quot;: {</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    &quot;everything&quot;: 42</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  },</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  &quot;list&quot;: [1, 0, 2],</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  &quot;object&quot;: {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    &quot;currency&quot;: &quot;USD&quot;,</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    &quot;value&quot;: 42.99</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  }</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;}</div></div><!-- fragment --><p>With the JSON class, you could write:</p>
<div class="fragment"><div class="line"><span class="comment">// create an empty structure (null)</span></div><div class="line"><a class="code" href="a00025.html">json</a> j;</div><div class="line"></div><div class="line"><span class="comment">// add a number that is stored as double (note the implicit conversion of j to an object)</span></div><div class="line">j[<span class="stringliteral">&quot;pi&quot;</span>] = 3.141;</div><div class="line"></div><div class="line"><span class="comment">// add a Boolean that is stored as bool</span></div><div class="line">j[<span class="stringliteral">&quot;happy&quot;</span>] = <span class="keyword">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// add a string that is stored as std::string</span></div><div class="line">j[<span class="stringliteral">&quot;name&quot;</span>] = <span class="stringliteral">&quot;Niels&quot;</span>;</div><div class="line"></div><div class="line"><span class="comment">// add another null object by passing nullptr</span></div><div class="line">j[<span class="stringliteral">&quot;nothing&quot;</span>] = <span class="keyword">nullptr</span>;</div><div class="line"></div><div class="line"><span class="comment">// add an object inside the object</span></div><div class="line">j[<span class="stringliteral">&quot;answer&quot;</span>][<span class="stringliteral">&quot;everything&quot;</span>] = 42;</div><div class="line"></div><div class="line"><span class="comment">// add an array that is stored as std::vector (using an initializer list)</span></div><div class="line">j[<span class="stringliteral">&quot;list&quot;</span>] = { 1, 0, 2 };</div><div class="line"></div><div class="line"><span class="comment">// add another object (using an initializer list of pairs)</span></div><div class="line">j[<span class="stringliteral">&quot;object&quot;</span>] = { {<span class="stringliteral">&quot;currency&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>}, {<span class="stringliteral">&quot;value&quot;</span>, 42.99} };</div><div class="line"></div><div class="line"><span class="comment">// instead, you could also write (which looks very similar to the JSON above)</span></div><div class="line"><a class="code" href="a00025.html">json</a> j2 = {</div><div class="line">  {<span class="stringliteral">&quot;pi&quot;</span>, 3.141},</div><div class="line">  {<span class="stringliteral">&quot;happy&quot;</span>, <span class="keyword">true</span>},</div><div class="line">  {<span class="stringliteral">&quot;name&quot;</span>, <span class="stringliteral">&quot;Niels&quot;</span>},</div><div class="line">  {<span class="stringliteral">&quot;nothing&quot;</span>, <span class="keyword">nullptr</span>},</div><div class="line">  {<span class="stringliteral">&quot;answer&quot;</span>, {</div><div class="line">    {<span class="stringliteral">&quot;everything&quot;</span>, 42}</div><div class="line">  }},</div><div class="line">  {<span class="stringliteral">&quot;list&quot;</span>, {1, 0, 2}},</div><div class="line">  {<span class="stringliteral">&quot;object&quot;</span>, {</div><div class="line">    {<span class="stringliteral">&quot;currency&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>},</div><div class="line">    {<span class="stringliteral">&quot;value&quot;</span>, 42.99}</div><div class="line">  }}</div><div class="line">};</div></div><!-- fragment --><p>Note that in all these cases, you never need to "tell" the compiler which JSON value you want to use. If you want to be explicit or express some edge cases, the functions <code><a class="el" href="a00025.html#a5685815624b086caa532f41e853d4b0f" title="explicitly create an array from an initializer list ">json::array</a></code> and <code><a class="el" href="a00025.html#ad25b2f8c21e241e2d63455537a9294ff" title="explicitly create an object from an initializer list ">json::object</a></code> will help:</p>
<div class="fragment"><div class="line"><span class="comment">// a way to express the empty array []</span></div><div class="line"><a class="code" href="a00025.html">json</a> empty_array_explicit = <a class="code" href="a00025.html#a5685815624b086caa532f41e853d4b0f">json::array</a>();</div><div class="line"></div><div class="line"><span class="comment">// ways to express the empty object {}</span></div><div class="line"><a class="code" href="a00025.html">json</a> empty_object_implicit = <a class="code" href="a00025.html">json</a>({});</div><div class="line"><a class="code" href="a00025.html">json</a> empty_object_explicit = <a class="code" href="a00025.html#ad25b2f8c21e241e2d63455537a9294ff">json::object</a>();</div><div class="line"></div><div class="line"><span class="comment">// a way to express an _array_ of key/value pairs [[&quot;currency&quot;, &quot;USD&quot;], [&quot;value&quot;, 42.99]]</span></div><div class="line"><a class="code" href="a00025.html">json</a> array_not_object = { <a class="code" href="a00025.html#a5685815624b086caa532f41e853d4b0f">json::array</a>({<span class="stringliteral">&quot;currency&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>}), <a class="code" href="a00025.html#a5685815624b086caa532f41e853d4b0f">json::array</a>({<span class="stringliteral">&quot;value&quot;</span>, 42.99}) };</div></div><!-- fragment --><h3>Serialization / Deserialization</h3>
<p>You can create an object (deserialization) by appending <code>_json</code> to a string literal:</p>
<div class="fragment"><div class="line"><span class="comment">// create object from string literal</span></div><div class="line"><a class="code" href="a00025.html">json</a> j = <span class="stringliteral">&quot;{ \&quot;happy\&quot;: true, \&quot;pi\&quot;: 3.141 }&quot;</span>_json;</div><div class="line"></div><div class="line"><span class="comment">// or even nicer (thanks http://isocpp.org/blog/2015/01/json-for-modern-cpp)</span></div><div class="line"><span class="keyword">auto</span> j2 = R<span class="stringliteral">&quot;(</span></div><div class="line"><span class="stringliteral">  {</span></div><div class="line"><span class="stringliteral">    &quot;happy&quot;: true,</span></div><div class="line"><span class="stringliteral">    &quot;pi&quot;: 3.141</span></div><div class="line"><span class="stringliteral">  }</span></div><div class="line"><span class="stringliteral">)&quot;_json;</span></div><div class="line"><span class="stringliteral"></span></div><div class="line"><span class="stringliteral"></span><span class="comment">// or explicitly</span></div><div class="line"><span class="keyword">auto</span> j3 = <a class="code" href="a00025.html#a35303ad045a06c2a79dc28ac29652e86">json::parse</a>(<span class="stringliteral">&quot;{ \&quot;happy\&quot;: true, \&quot;pi\&quot;: 3.141 }&quot;</span>);</div></div><!-- fragment --><p>You can also get a string representation (serialize):</p>
<div class="fragment"><div class="line"><span class="comment">// explicit conversion to string</span></div><div class="line">std::string s = j.<a class="code" href="a00025.html#a805e3f3a2f374da0e14942eec7400e40">dump</a>();    <span class="comment">// {\&quot;happy\&quot;:true,\&quot;pi\&quot;:3.141}</span></div><div class="line"></div><div class="line"><span class="comment">// serialization with pretty printing</span></div><div class="line"><span class="comment">// pass in the amount of spaces to indent</span></div><div class="line">std::cout &lt;&lt; j.<a class="code" href="a00025.html#a805e3f3a2f374da0e14942eec7400e40">dump</a>(4) &lt;&lt; std::endl;</div><div class="line"><span class="comment">// {</span></div><div class="line"><span class="comment">//     &quot;happy&quot;: true,</span></div><div class="line"><span class="comment">//     &quot;pi&quot;: 3.141</span></div><div class="line"><span class="comment">// }</span></div></div><!-- fragment --><p>You can also use streams to serialize and deserialize:</p>
<div class="fragment"><div class="line"><span class="comment">// deserialize from standard input</span></div><div class="line"><a class="code" href="a00025.html">json</a> j;</div><div class="line">std::cin &gt;&gt; j;</div><div class="line"></div><div class="line"><span class="comment">// serialize to standard output</span></div><div class="line">std::cout &lt;&lt; j;</div><div class="line"></div><div class="line"><span class="comment">// the setw manipulator was overloaded to set the indentation for pretty printing</span></div><div class="line">std::cout &lt;&lt; std::setw(4) &lt;&lt; j &lt;&lt; std::endl;</div></div><!-- fragment --><p>These operators work for any subclasses of <code>std::istream</code> or <code>std::ostream</code>.</p>
<h3>STL-like access</h3>
<p>We designed the JSON class to behave just like an STL container. In fact, it satisfies the <a href="http://en.cppreference.com/w/cpp/concept/ReversibleContainer"><b>ReversibleContainer</b></a> requirement.</p>
<div class="fragment"><div class="line"><span class="comment">// create an array using push_back</span></div><div class="line"><a class="code" href="a00025.html">json</a> j;</div><div class="line">j.<a class="code" href="a00025.html#a486b96adbf4886c38e38c952394a220f">push_back</a>(<span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line">j.<a class="code" href="a00025.html#a486b96adbf4886c38e38c952394a220f">push_back</a>(1);</div><div class="line">j.<a class="code" href="a00025.html#a486b96adbf4886c38e38c952394a220f">push_back</a>(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// iterate the array</span></div><div class="line"><span class="keywordflow">for</span> (<a class="code" href="a00079.html">json::iterator</a> it = j.<a class="code" href="a00025.html#ad4e381c54039607be08d7af41a1f6ad1">begin</a>(); it != j.<a class="code" href="a00025.html#a12ccf14d39ddae52f6c7e126105a230b">end</a>(); ++it) {</div><div class="line">  std::cout &lt;&lt; *it &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// range-based for</span></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> element : j) {</div><div class="line">  std::cout &lt;&lt; element &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// getter/setter</span></div><div class="line"><span class="keyword">const</span> std::string tmp = j[0];</div><div class="line">j[1] = 42;</div><div class="line"><span class="keywordtype">bool</span> foo = j.at(2);</div><div class="line"></div><div class="line"><span class="comment">// other stuff</span></div><div class="line">j.size();     <span class="comment">// 3 entries</span></div><div class="line">j.empty();    <span class="comment">// false</span></div><div class="line">j.type();     <span class="comment">// json::value_t::array</span></div><div class="line">j.clear();    <span class="comment">// the array is empty again</span></div><div class="line"></div><div class="line"><span class="comment">// convenience type checkers</span></div><div class="line">j.is_null();</div><div class="line">j.is_boolean();</div><div class="line">j.is_number();</div><div class="line">j.is_object();</div><div class="line">j.is_array();</div><div class="line">j.is_string();</div><div class="line"></div><div class="line"><span class="comment">// comparison</span></div><div class="line">j == <span class="stringliteral">&quot;[\&quot;foo\&quot;, 1, true]&quot;</span>_json;  <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// create an object</span></div><div class="line"><a class="code" href="a00025.html">json</a> o;</div><div class="line">o[<span class="stringliteral">&quot;foo&quot;</span>] = 23;</div><div class="line">o[<span class="stringliteral">&quot;bar&quot;</span>] = <span class="keyword">false</span>;</div><div class="line">o[<span class="stringliteral">&quot;baz&quot;</span>] = 3.141;</div><div class="line"></div><div class="line"><span class="comment">// special iterator member functions for objects</span></div><div class="line"><span class="keywordflow">for</span> (<a class="code" href="a00079.html">json::iterator</a> it = o.<a class="code" href="a00025.html#ad4e381c54039607be08d7af41a1f6ad1">begin</a>(); it != o.<a class="code" href="a00025.html#a12ccf14d39ddae52f6c7e126105a230b">end</a>(); ++it) {</div><div class="line">  std::cout &lt;&lt; it.key() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; it.<a class="code" href="a00025.html#a0a2cbbd95862a623e7dc5c37e67dead0">value</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// find an entry</span></div><div class="line"><span class="keywordflow">if</span> (o.<a class="code" href="a00025.html#affe7e160e7bb06eed83c8b437af4692f">find</a>(<span class="stringliteral">&quot;foo&quot;</span>) != o.<a class="code" href="a00025.html#a12ccf14d39ddae52f6c7e126105a230b">end</a>()) {</div><div class="line">  <span class="comment">// there is an entry with key &quot;foo&quot;</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// or simpler using count()</span></div><div class="line"><span class="keywordtype">int</span> foo_present = o.<a class="code" href="a00025.html#a51b0036310d8aa5858fecc0d91127f27">count</a>(<span class="stringliteral">&quot;foo&quot;</span>); <span class="comment">// 1</span></div><div class="line"><span class="keywordtype">int</span> fob_present = o.<a class="code" href="a00025.html#a51b0036310d8aa5858fecc0d91127f27">count</a>(<span class="stringliteral">&quot;fob&quot;</span>); <span class="comment">// 0</span></div><div class="line"></div><div class="line"><span class="comment">// delete an entry</span></div><div class="line">o.<a class="code" href="a00025.html#a45e789042a23138eba2b69f34df9fc45">erase</a>(<span class="stringliteral">&quot;foo&quot;</span>);</div></div><!-- fragment --><h3>Conversion from STL containers</h3>
<p>Any sequence container (<code>std::array</code>, <code>std::vector</code>, <code>std::deque</code>, <code>std::forward_list</code>, <code>std::list</code>) whose values can be used to construct JSON types (e.g., integers, floating point numbers, Booleans, string types, or again STL containers described in this section) can be used to create a JSON array. The same holds for similar associative containers (<code>std::set</code>, <code>std::multiset</code>, <code>std::unordered_set</code>, <code>std::unordered_multiset</code>), but in these cases the order of the elements of the array depends how the elements are ordered in the respective STL container.</p>
<div class="fragment"><div class="line">std::vector&lt;int&gt; c_vector {1, 2, 3, 4};</div><div class="line"><a class="code" href="a00025.html">json</a> j_vec(c_vector);</div><div class="line"><span class="comment">// [1, 2, 3, 4]</span></div><div class="line"></div><div class="line">std::deque&lt;double&gt; c_deque {1.2, 2.3, 3.4, 5.6};</div><div class="line"><a class="code" href="a00025.html">json</a> j_deque(c_deque);</div><div class="line"><span class="comment">// [1.2, 2.3, 3.4, 5.6]</span></div><div class="line"></div><div class="line">std::list&lt;bool&gt; c_list {<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>};</div><div class="line"><a class="code" href="a00025.html">json</a> j_list(c_list);</div><div class="line"><span class="comment">// [true, true, false, true]</span></div><div class="line"></div><div class="line">std::forward_list&lt;int64_t&gt; c_flist {12345678909876, 23456789098765, 34567890987654, 45678909876543};</div><div class="line"><a class="code" href="a00025.html">json</a> j_flist(c_flist);</div><div class="line"><span class="comment">// [12345678909876, 23456789098765, 34567890987654, 45678909876543]</span></div><div class="line"></div><div class="line">std::array&lt;unsigned long, 4&gt; c_array {{1, 2, 3, 4}};</div><div class="line"><a class="code" href="a00025.html">json</a> j_array(c_array);</div><div class="line"><span class="comment">// [1, 2, 3, 4]</span></div><div class="line"></div><div class="line">std::set&lt;std::string&gt; c_set {<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>, <span class="stringliteral">&quot;one&quot;</span>};</div><div class="line"><a class="code" href="a00025.html">json</a> j_set(c_set); <span class="comment">// only one entry for &quot;one&quot; is used</span></div><div class="line"><span class="comment">// [&quot;four&quot;, &quot;one&quot;, &quot;three&quot;, &quot;two&quot;]</span></div><div class="line"></div><div class="line">std::unordered_set&lt;std::string&gt; c_uset {<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>, <span class="stringliteral">&quot;one&quot;</span>};</div><div class="line"><a class="code" href="a00025.html">json</a> j_uset(c_uset); <span class="comment">// only one entry for &quot;one&quot; is used</span></div><div class="line"><span class="comment">// maybe [&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;one&quot;]</span></div><div class="line"></div><div class="line">std::multiset&lt;std::string&gt; c_mset {<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>};</div><div class="line"><a class="code" href="a00025.html">json</a> j_mset(c_mset); <span class="comment">// only one entry for &quot;one&quot; is used</span></div><div class="line"><span class="comment">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;four&quot;]</span></div><div class="line"></div><div class="line">std::unordered_multiset&lt;std::string&gt; c_umset {<span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>};</div><div class="line"><a class="code" href="a00025.html">json</a> j_umset(c_umset); <span class="comment">// both entries for &quot;one&quot; are used</span></div><div class="line"><span class="comment">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span></div></div><!-- fragment --><p>Likewise, any associative key-value containers (<code>std::map</code>, <code>std::multimap</code>, <code>std::unordered_map</code>, <code>std::unordered_multimap</code>) whose keys are can construct an <code>std::string</code> and whose values can be used to construct JSON types (see examples above) can be used to to create a JSON object. Note that in case of multimaps only one key is used in the JSON object and the value depends on the internal order of the STL container.</p>
<div class="fragment"><div class="line">std::map&lt;std::string, int&gt; c_map { {<span class="stringliteral">&quot;one&quot;</span>, 1}, {<span class="stringliteral">&quot;two&quot;</span>, 2}, {<span class="stringliteral">&quot;three&quot;</span>, 3} };</div><div class="line"><a class="code" href="a00025.html">json</a> j_map(c_map);</div><div class="line"><span class="comment">// {&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3}</span></div><div class="line"></div><div class="line">std::unordered_map&lt;const char*, double&gt; c_umap { {<span class="stringliteral">&quot;one&quot;</span>, 1.2}, {<span class="stringliteral">&quot;two&quot;</span>, 2.3}, {<span class="stringliteral">&quot;three&quot;</span>, 3.4} };</div><div class="line"><a class="code" href="a00025.html">json</a> j_umap(c_umap);</div><div class="line"><span class="comment">// {&quot;one&quot;: 1.2, &quot;two&quot;: 2.3, &quot;three&quot;: 3.4}</span></div><div class="line"></div><div class="line">std::multimap&lt;std::string, bool&gt; c_mmap { {<span class="stringliteral">&quot;one&quot;</span>, <span class="keyword">true</span>}, {<span class="stringliteral">&quot;two&quot;</span>, <span class="keyword">true</span>}, {<span class="stringliteral">&quot;three&quot;</span>, <span class="keyword">false</span>}, {<span class="stringliteral">&quot;three&quot;</span>, <span class="keyword">true</span>} };</div><div class="line"><a class="code" href="a00025.html">json</a> j_mmap(c_mmap); <span class="comment">// only one entry for key &quot;three&quot; is used</span></div><div class="line"><span class="comment">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span></div><div class="line"></div><div class="line">std::unordered_multimap&lt;std::string, bool&gt; c_ummap { {<span class="stringliteral">&quot;one&quot;</span>, <span class="keyword">true</span>}, {<span class="stringliteral">&quot;two&quot;</span>, <span class="keyword">true</span>}, {<span class="stringliteral">&quot;three&quot;</span>, <span class="keyword">false</span>}, {<span class="stringliteral">&quot;three&quot;</span>, <span class="keyword">true</span>} };</div><div class="line"><a class="code" href="a00025.html">json</a> j_ummap(c_ummap); <span class="comment">// only one entry for key &quot;three&quot; is used</span></div><div class="line"><span class="comment">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span></div></div><!-- fragment --><h3>Implicit conversions</h3>
<p>The type of the JSON object is determined automatically by the expression to store. Likewise, the stored value is implicitly converted.</p>
<div class="fragment"><div class="line">std::string s1 = <span class="stringliteral">&quot;Hello, world!&quot;</span>;</div><div class="line"><a class="code" href="a00025.html">json</a> js = s1;</div><div class="line">std::string s2 = js;</div><div class="line"></div><div class="line"><span class="comment">// Booleans</span></div><div class="line"><span class="keywordtype">bool</span> b1 = <span class="keyword">true</span>;</div><div class="line"><a class="code" href="a00025.html">json</a> jb = b1;</div><div class="line"><span class="keywordtype">bool</span> b2 = jb;</div><div class="line"></div><div class="line"><span class="comment">// numbers</span></div><div class="line"><span class="keywordtype">int</span> i = 42;</div><div class="line"><a class="code" href="a00025.html">json</a> jn = i;</div><div class="line"><span class="keywordtype">double</span> f = jn;</div><div class="line"></div><div class="line"><span class="comment">// etc.</span></div></div><!-- fragment --><p>You can also explicitly ask for the value:</p>
<div class="fragment"><div class="line">std::string vs = js.<a class="code" href="a00025.html#a20bfb2ca6d4c421c74bb3e53328cd437">get</a>&lt;std::string&gt;();</div><div class="line"><span class="keywordtype">bool</span> vb = jb.<a class="code" href="a00025.html#a20bfb2ca6d4c421c74bb3e53328cd437">get</a>&lt;<span class="keywordtype">bool</span>&gt;();</div><div class="line"><span class="keywordtype">int</span> vi = jn.<a class="code" href="a00025.html#a20bfb2ca6d4c421c74bb3e53328cd437">get</a>&lt;<span class="keywordtype">int</span>&gt;();</div><div class="line"></div><div class="line"><span class="comment">// etc.</span></div></div><!-- fragment --><h2>License</h2>
<div class="image">
<img src="http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png"  align="right"/>
</div>
<p>The class is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>:</p>
<p>Copyright &copy; 2013-2016 <a href="http://nlohmann.me">Niels Lohmann</a></p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2>Thanks</h2>
<p>I deeply appreciate the help of the following people.</p>
<ul>
<li><a href="https://github.com/Teemperor">Teemperor</a> implemented CMake support and lcov integration, realized escape and Unicode handling in the string parser, and fixed the JSON serialization.</li>
<li><a href="https://github.com/elliotgoodrich">elliotgoodrich</a> fixed an issue with double deletion in the iterator classes.</li>
<li><a href="https://github.com/kirkshoop">kirkshoop</a> made the iterators of the class composable to other libraries.</li>
<li><a href="https://github.com/wanwc">wancw</a> fixed a bug that hindered the class to compile with Clang.</li>
<li>Tomas Åblad found a bug in the iterator implementation.</li>
<li><a href="https://github.com/jrandall">Joshua C. Randall</a> fixed a bug in the floating-point serialization.</li>
<li><a href="https://github.com/aburgh">Aaron Burghardt</a> implemented code to parse streams incrementally. Furthermore, he greatly improved the parser class by allowing the definition of a filter function to discard undesired elements while parsing.</li>
<li><a href="https://github.com/dkopecek">Daniel Kopeček</a> fixed a bug in the compilation with GCC 5.0.</li>
<li><a href="https://github.com/Florianjw">Florian Weber</a> fixed a bug in and improved the performance of the comparison operators.</li>
<li><a href="https://github.com/EricMCornelius">Eric Cornelius</a> pointed out a bug in the handling with NaN and infinity values. He also improved the performance of the string escaping.</li>
<li><a href="https://github.com/likebeta">易思龙</a> implemented a conversion from anonymous enums.</li>
<li><a href="https://github.com/kepkin">kepkin</a> patiently pushed forward the support for Microsoft Visual studio.</li>
<li><a href="https://github.com/gregmarr">gregmarr</a> simplified the implementation of reverse iterators and helped with numerous hints and improvements.</li>
<li><a href="https://github.com/caiovlp">Caio Luppi</a> fixed a bug in the Unicode handling.</li>
<li><a href="https://github.com/dariomt">dariomt</a> fixed some typos in the examples.</li>
<li><a href="https://github.com/d-frey">Daniel Frey</a> cleaned up some pointers and implemented exception-safe memory allocation.</li>
<li><a href="https://github.com/ColinH">Colin Hirsch</a> took care of a small namespace issue.</li>
<li><a href="https://github.com/whoshuu">Huu Nguyen</a> correct a variable name in the documentation.</li>
<li><a href="https://github.com/silverweed">Silverweed</a> overloaded <code>parse()</code> to accept an rvalue reference.</li>
<li><a href="https://github.com/dariomt">dariomt</a> fixed a subtlety in MSVC type support and implemented the <code>get_ref()</code> function to get a reference to stored values.</li>
<li><a href="https://github.com/ZahlGraf">ZahlGraf</a> added a workaround that allows compilation using Android NDK.</li>
<li><a href="https://github.com/whackashoe">whackashoe</a> replaced a function that was marked as unsafe by Visual Studio.</li>
<li><a href="https://github.com/406345">406345</a> fixed two small warnings.</li>
<li><a href="https://github.com/glenfe">Glen Fernandes</a> noted a potential portability problem in the <code>has_mapped_type</code> function.</li>
<li><a href="https://github.com/nibroc">Corbin Hughes</a> fixed some typos in the contribution guidelines.</li>
<li><a href="https://github.com/twelsby">twelsby</a> fixed the array subscript operator, an issue that failed the MSVC build, and floating-point parsing/dumping. He further added support for unsigned integer numbers.</li>
<li><a href="https://github.com/vog">Volker Diels-Grabsch</a> fixed a link in the README file.</li>
<li><a href="https://github.com/msm-">msm-</a> added support for american fuzzy lop.</li>
</ul>
<p>Thanks a lot for helping out!</p>
<h2>Notes</h2>
<ul>
<li>The code contains numerous debug <b>assertions</b> which can be switched off by defining the preprocessor macro <code>NDEBUG</code>, see the <a href="http://en.cppreference.com/w/cpp/error/assert">documentation of <code>assert</code></a>.</li>
<li>As the exact type of a number is not defined in the <a href="http://rfc7159.net/rfc7159">JSON specification</a>, this library tries to choose the best fitting C++ number type automatically. As a result, the type <code>double</code> may be used to store numbers which may yield <a href="https://github.com/nlohmann/json/issues/181"><b>floating-point exceptions</b></a> in certain rare situations if floating-point exceptions have been unmasked in the calling code. These exceptions are not caused by the library and need to be fixed in the calling code, such as by re-masking the exceptions prior to calling library functions.</li>
</ul>
<h2>Execute unit tests</h2>
<p>To compile and run the tests, you need to execute</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ make</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ ./json_unit &quot;*&quot;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;===============================================================================</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;All tests passed (3344278 assertions in 29 test cases)</div></div><!-- fragment --><p>For more information, have a look at the file <a href="https://github.com/nlohmann/json/blob/master/.travis.yml">.travis.yml</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
