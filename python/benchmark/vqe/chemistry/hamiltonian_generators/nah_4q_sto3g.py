from pelix.ipopo.decorators import ComponentFactory, Property, Requires, Provides, \
    Validate, Invalidate, Instantiate
from hamiltonian_generator import HamiltonianGenerator
import ast, xacc
import xaccvqe as vqe
from xaccvqe import PauliOperator


@ComponentFactory("nah_4q_sto3g_hamiltonian_generator_factory")
@Provides("hamiltonian_generator")
@Property("_hamiltonian_generator", "hamiltonian_generator", "nah_4q_sto3g")
@Property("_name", "name", "nah_4q_sto3g")
@Instantiate("nah_4q_sto3g_hamiltonian_generator_instance")
class NaH(HamiltonianGenerator):

    def generate(self, inputParams):
        src = """__qpu__ openfermion_kernel() {
-159.505
-0.714932 0 1 0 0
0.091683 0 1 1 0
0.091683 1 1 0 0
0.173443 1 1 1 0
-0.714932 2 1 2 0
0.091683 2 1 3 0
0.091683 3 1 2 0
0.173443 3 1 3 0
-0.0816923 0 1 1 1 0 0 1 0
0.0816923 0 1 1 1 1 0 0 0
-0.158901 0 1 2 1 0 0 2 0
0.0229208 0 1 2 1 0 0 3 0
0.0229208 0 1 2 1 1 0 2 0
-0.0202421 0 1 2 1 1 0 3 0
0.158901 0 1 2 1 2 0 0 0
-0.0229208 0 1 2 1 2 0 1 0
-0.0229208 0 1 2 1 3 0 0 0
0.0202421 0 1 2 1 3 0 1 0
0.0229208 0 1 3 1 0 0 2 0
-0.101934 0 1 3 1 0 0 3 0
-0.0202421 0 1 3 1 1 0 2 0
-0.00944179 0 1 3 1 1 0 3 0
-0.0229208 0 1 3 1 2 0 0 0
0.0202421 0 1 3 1 2 0 1 0
0.101934 0 1 3 1 3 0 0 0
0.00944179 0 1 3 1 3 0 1 0
0.0816923 1 1 0 1 0 0 1 0
-0.0816923 1 1 0 1 1 0 0 0
0.0229208 1 1 2 1 0 0 2 0
-0.0202421 1 1 2 1 0 0 3 0
-0.101934 1 1 2 1 1 0 2 0
-0.00944179 1 1 2 1 1 0 3 0
-0.0229208 1 1 2 1 2 0 0 0
0.101934 1 1 2 1 2 0 1 0
0.0202421 1 1 2 1 3 0 0 0
0.00944179 1 1 2 1 3 0 1 0
-0.0202421 1 1 3 1 0 0 2 0
-0.00944179 1 1 3 1 0 0 3 0
-0.00944179 1 1 3 1 1 0 2 0
-0.11747 1 1 3 1 1 0 3 0
0.0202421 1 1 3 1 2 0 0 0
0.00944179 1 1 3 1 2 0 1 0
0.00944179 1 1 3 1 3 0 0 0
0.11747 1 1 3 1 3 0 1 0
0.158901 2 1 0 1 0 0 2 0
-0.0229208 2 1 0 1 0 0 3 0
-0.0229208 2 1 0 1 1 0 2 0
0.0202421 2 1 0 1 1 0 3 0
-0.158901 2 1 0 1 2 0 0 0
0.0229208 2 1 0 1 2 0 1 0
0.0229208 2 1 0 1 3 0 0 0
-0.0202421 2 1 0 1 3 0 1 0
-0.0229208 2 1 1 1 0 0 2 0
0.0202421 2 1 1 1 0 0 3 0
0.101934 2 1 1 1 1 0 2 0
0.00944179 2 1 1 1 1 0 3 0
0.0229208 2 1 1 1 2 0 0 0
-0.101934 2 1 1 1 2 0 1 0
-0.0202421 2 1 1 1 3 0 0 0
-0.00944179 2 1 1 1 3 0 1 0
-0.0816923 2 1 3 1 2 0 3 0
0.0816923 2 1 3 1 3 0 2 0
-0.0229208 3 1 0 1 0 0 2 0
0.101934 3 1 0 1 0 0 3 0
0.0202421 3 1 0 1 1 0 2 0
0.00944179 3 1 0 1 1 0 3 0
0.0229208 3 1 0 1 2 0 0 0
-0.0202421 3 1 0 1 2 0 1 0
-0.101934 3 1 0 1 3 0 0 0
-0.00944179 3 1 0 1 3 0 1 0
0.0202421 3 1 1 1 0 0 2 0
0.00944179 3 1 1 1 0 0 3 0
0.00944179 3 1 1 1 1 0 2 0
0.11747 3 1 1 1 1 0 3 0
-0.0202421 3 1 1 1 2 0 0 0
-0.00944179 3 1 1 1 2 0 1 0
-0.00944179 3 1 1 1 3 0 0 0
-0.11747 3 1 1 1 3 0 1 0
0.0816923 3 1 2 1 2 0 3 0
-0.0816923 3 1 2 1 3 0 2 0
}"""
        inputParams['rdm-source'] = src
        return vqe.compile(src)