from pelix.ipopo.decorators import ComponentFactory, Property, Requires, Provides, \
    Validate, Invalidate, Instantiate
from hamiltonian_generator import HamiltonianGenerator
import ast, xacc
import xaccvqe as vqe
from xaccvqe import PauliOperator


@ComponentFactory("rbh_4q_sto3g_hamiltonian_generator_factory")
@Provides("hamiltonian_generator")
@Property("_hamiltonian_generator", "hamiltonian_generator", "rbh_4q_sto3g")
@Property("_name", "name", "rbh_4q_sto3g")
@Instantiate("rbh_4q_sto3g_hamiltonian_generator_instance")
class RBH(HamiltonianGenerator):

    def generate(self, inputParams):
        src = """__qpu__ openfermion_kernel() {
-2907.43
-0.623109 0 1 0 0
0.134872 0 1 1 0
0.134872 1 1 0 0
-0.142781 1 1 1 0
-0.623109 2 1 2 0
0.134872 2 1 3 0
0.134872 3 1 2 0
-0.142781 3 1 3 0
-0.0467144 0 1 1 1 0 0 1 0
0.0467144 0 1 1 1 1 0 0 0
-0.13977 0 1 2 1 0 0 2 0
0.0337181 0 1 2 1 0 0 3 0
0.0337181 0 1 2 1 1 0 2 0
-0.0167447 0 1 2 1 1 0 3 0
0.13977 0 1 2 1 2 0 0 0
-0.0337181 0 1 2 1 2 0 1 0
-0.0337181 0 1 2 1 3 0 0 0
0.0167447 0 1 2 1 3 0 1 0
0.0337181 0 1 3 1 0 0 2 0
-0.063459 0 1 3 1 0 0 3 0
-0.0167447 0 1 3 1 1 0 2 0
-0.00198784 0 1 3 1 1 0 3 0
-0.0337181 0 1 3 1 2 0 0 0
0.0167447 0 1 3 1 2 0 1 0
0.063459 0 1 3 1 3 0 0 0
0.00198784 0 1 3 1 3 0 1 0
0.0467144 1 1 0 1 0 0 1 0
-0.0467144 1 1 0 1 1 0 0 0
0.0337181 1 1 2 1 0 0 2 0
-0.0167447 1 1 2 1 0 0 3 0
-0.063459 1 1 2 1 1 0 2 0
-0.00198784 1 1 2 1 1 0 3 0
-0.0337181 1 1 2 1 2 0 0 0
0.063459 1 1 2 1 2 0 1 0
0.0167447 1 1 2 1 3 0 0 0
0.00198784 1 1 2 1 3 0 1 0
-0.0167447 1 1 3 1 0 0 2 0
-0.00198784 1 1 3 1 0 0 3 0
-0.00198784 1 1 3 1 1 0 2 0
-0.0741123 1 1 3 1 1 0 3 0
0.0167447 1 1 3 1 2 0 0 0
0.00198784 1 1 3 1 2 0 1 0
0.00198784 1 1 3 1 3 0 0 0
0.0741123 1 1 3 1 3 0 1 0
0.13977 2 1 0 1 0 0 2 0
-0.0337181 2 1 0 1 0 0 3 0
-0.0337181 2 1 0 1 1 0 2 0
0.0167447 2 1 0 1 1 0 3 0
-0.13977 2 1 0 1 2 0 0 0
0.0337181 2 1 0 1 2 0 1 0
0.0337181 2 1 0 1 3 0 0 0
-0.0167447 2 1 0 1 3 0 1 0
-0.0337181 2 1 1 1 0 0 2 0
0.0167447 2 1 1 1 0 0 3 0
0.063459 2 1 1 1 1 0 2 0
0.00198784 2 1 1 1 1 0 3 0
0.0337181 2 1 1 1 2 0 0 0
-0.063459 2 1 1 1 2 0 1 0
-0.0167447 2 1 1 1 3 0 0 0
-0.00198784 2 1 1 1 3 0 1 0
-0.0467144 2 1 3 1 2 0 3 0
0.0467144 2 1 3 1 3 0 2 0
-0.0337181 3 1 0 1 0 0 2 0
0.063459 3 1 0 1 0 0 3 0
0.0167447 3 1 0 1 1 0 2 0
0.00198784 3 1 0 1 1 0 3 0
0.0337181 3 1 0 1 2 0 0 0
-0.0167447 3 1 0 1 2 0 1 0
-0.063459 3 1 0 1 3 0 0 0
-0.00198784 3 1 0 1 3 0 1 0
0.0167447 3 1 1 1 0 0 2 0
0.00198784 3 1 1 1 0 0 3 0
0.00198784 3 1 1 1 1 0 2 0
0.0741123 3 1 1 1 1 0 3 0
-0.0167447 3 1 1 1 2 0 0 0
-0.00198784 3 1 1 1 2 0 1 0
-0.00198784 3 1 1 1 3 0 0 0
-0.0741123 3 1 1 1 3 0 1 0
0.0467144 3 1 2 1 2 0 3 0
-0.0467144 3 1 2 1 3 0 2 0
}"""
        inputParams['rdm-source'] = src
        return vqe.compile(src)
