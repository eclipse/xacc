from pelix.ipopo.decorators import ComponentFactory, Property, Requires, Provides, \
    Validate, Invalidate, Instantiate
from hamiltonian_generator import HamiltonianGenerator
import ast, xacc
import xaccvqe as vqe
from xaccvqe import PauliOperator


@ComponentFactory("kh_4q_sto3g_hamiltonian_generator_factory")
@Provides("hamiltonian_generator")
@Property("_hamiltonian_generator", "hamiltonian_generator", "kh_4q_sto3g")
@Property("_name", "name", "kh_4q_sto3g")
@Instantiate("kh_4q_sto3g_hamiltonian_generator_instance")
class KH(HamiltonianGenerator):

    def generate(self, inputParams):
        src = """__qpu__ openfermion_kernel() {
-592.777
-0.638617 0 1 0 0
0.104868 0 1 1 0
0.104868 1 1 0 0
-0.112152 1 1 1 0
-0.638617 2 1 2 0
0.104868 2 1 3 0
0.104868 3 1 2 0
-0.112152 3 1 3 0
-0.0678583 0 1 1 1 0 0 1 0
0.0678583 0 1 1 1 1 0 0 0
-0.122379 0 1 2 1 0 0 2 0
0.026217 0 1 2 1 0 0 3 0
0.026217 0 1 2 1 1 0 2 0
-0.0237476 0 1 2 1 1 0 3 0
0.122379 0 1 2 1 2 0 0 0
-0.026217 0 1 2 1 2 0 1 0
-0.026217 0 1 2 1 3 0 0 0
0.0237476 0 1 2 1 3 0 1 0
0.026217 0 1 3 1 0 0 2 0
-0.0916059 0 1 3 1 0 0 3 0
-0.0237476 0 1 3 1 1 0 2 0
0.00904726 0 1 3 1 1 0 3 0
-0.026217 0 1 3 1 2 0 0 0
0.0237476 0 1 3 1 2 0 1 0
0.0916059 0 1 3 1 3 0 0 0
-0.00904726 0 1 3 1 3 0 1 0
0.0678583 1 1 0 1 0 0 1 0
-0.0678583 1 1 0 1 1 0 0 0
0.026217 1 1 2 1 0 0 2 0
-0.0237476 1 1 2 1 0 0 3 0
-0.0916059 1 1 2 1 1 0 2 0
0.00904726 1 1 2 1 1 0 3 0
-0.026217 1 1 2 1 2 0 0 0
0.0916059 1 1 2 1 2 0 1 0
0.0237476 1 1 2 1 3 0 0 0
-0.00904726 1 1 2 1 3 0 1 0
-0.0237476 1 1 3 1 0 0 2 0
0.00904726 1 1 3 1 0 0 3 0
0.00904726 1 1 3 1 1 0 2 0
-0.08263 1 1 3 1 1 0 3 0
0.0237476 1 1 3 1 2 0 0 0
-0.00904726 1 1 3 1 2 0 1 0
-0.00904726 1 1 3 1 3 0 0 0
0.08263 1 1 3 1 3 0 1 0
0.122379 2 1 0 1 0 0 2 0
-0.026217 2 1 0 1 0 0 3 0
-0.026217 2 1 0 1 1 0 2 0
0.0237476 2 1 0 1 1 0 3 0
-0.122379 2 1 0 1 2 0 0 0
0.026217 2 1 0 1 2 0 1 0
0.026217 2 1 0 1 3 0 0 0
-0.0237476 2 1 0 1 3 0 1 0
-0.026217 2 1 1 1 0 0 2 0
0.0237476 2 1 1 1 0 0 3 0
0.0916059 2 1 1 1 1 0 2 0
-0.00904726 2 1 1 1 1 0 3 0
0.026217 2 1 1 1 2 0 0 0
-0.0916059 2 1 1 1 2 0 1 0
-0.0237476 2 1 1 1 3 0 0 0
0.00904726 2 1 1 1 3 0 1 0
-0.0678583 2 1 3 1 2 0 3 0
0.0678583 2 1 3 1 3 0 2 0
-0.026217 3 1 0 1 0 0 2 0
0.0916059 3 1 0 1 0 0 3 0
0.0237476 3 1 0 1 1 0 2 0
-0.00904726 3 1 0 1 1 0 3 0
0.026217 3 1 0 1 2 0 0 0
-0.0237476 3 1 0 1 2 0 1 0
-0.0916059 3 1 0 1 3 0 0 0
0.00904726 3 1 0 1 3 0 1 0
0.0237476 3 1 1 1 0 0 2 0
-0.00904726 3 1 1 1 0 0 3 0
-0.00904726 3 1 1 1 1 0 2 0
0.08263 3 1 1 1 1 0 3 0
-0.0237476 3 1 1 1 2 0 0 0
0.00904726 3 1 1 1 2 0 1 0
0.00904726 3 1 1 1 3 0 0 0
-0.08263 3 1 1 1 3 0 1 0
0.0678583 3 1 2 1 2 0 3 0
-0.0678583 3 1 2 1 3 0 2 0
}"""
        inputParams['rdm-source'] = src
        return vqe.compile(src)
